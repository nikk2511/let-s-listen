<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ Let's Listen</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">
                    <i class="fas fa-music"></i>
                    Let's Listen
                </h1>
                <p class="app-subtitle">Discover and play music from independent artists</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Search Section -->
            <section class="search-section">
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search for songs, artists, or albums..." class="search-input">
                        <button id="searchBtn" class="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section">
                <div id="loadingState" class="state-message hidden">
                    <div class="loading-spinner"></div>
                    <p>Searching for music...</p>
                </div>

                <div id="errorState" class="state-message hidden">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>Oops! Something went wrong</h3>
                    <p id="errorMessage">Failed to search for tracks. Please try again.</p>
                    <button onclick="app.retrySearch()" class="retry-btn">Try Again</button>
                </div>

                <div id="noResultsState" class="state-message hidden">
                    <div class="no-results-icon">
                        <i class="fas fa-music"></i>
                    </div>
                    <h3>No tracks found</h3>
                    <p>Try searching for different keywords or check your spelling.</p>
                </div>

                <div id="tracksContainer" class="tracks-container hidden"></div>
            </section>
        </main>

        <!-- Audio Player -->
        <div id="audioPlayer" class="audio-player hidden">
            <div class="player-content">
                <div class="player-info">
                    <div class="player-track-info">
                        <h4 id="playerTitle">Track Title</h4>
                        <p id="playerArtist">Artist Name</p>
                    </div>
                </div>
                <div class="player-controls">
                    <button id="prevBtn" class="control-btn" title="Previous">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button id="playPauseBtn" class="control-btn play-pause" title="Play/Pause">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="nextBtn" class="control-btn" title="Next">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                <div class="player-progress">
                    <input type="range" id="progressSlider" class="progress-slider" min="0" max="100" value="0">
                </div>
                <div class="player-volume">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="50">
                </div>
                <button id="closePlayerBtn" class="close-player-btn" title="Close Player">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Hidden Audio Element -->
    <audio id="audioElement" preload="none"></audio>

    <script>
        // Simple inline JavaScript for testing
        console.log('üéµ Let\'s Listen - Simple Version Loading...');
        
        class SimpleLetsListen {
            constructor() {
                this.currentTracks = [];
                this.currentTrackIndex = 0;
                this.isPlaying = false;
                this.audio = null;
                this.volume = 0.5;
                
                this.init();
            }
            
            init() {
                console.log('üöÄ Initializing Simple Let\'s Listen...');
                
                // Get elements
                this.searchInput = document.getElementById('searchInput');
                this.searchBtn = document.getElementById('searchBtn');
                this.tracksContainer = document.getElementById('tracksContainer');
                this.loadingState = document.getElementById('loadingState');
                this.errorState = document.getElementById('errorState');
                this.noResultsState = document.getElementById('noResultsState');
                this.audioPlayer = document.getElementById('audioPlayer');
                this.audioElement = document.getElementById('audioElement');
                
                // Add event listeners
                this.searchBtn.addEventListener('click', () => this.handleSearch());
                this.searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handleSearch();
                });
                
                console.log('‚úÖ Simple Let\'s Listen initialized successfully!');
            }
            
            async handleSearch() {
                const query = this.searchInput.value.trim();
                if (!query) return;
                
                console.log('üîç Searching for:', query);
                this.showLoading();
                
                try {
                    // For now, show a demo message
                    this.showDemoResults();
                } catch (error) {
                    console.error('‚ùå Search error:', error);
                    this.showError('Search failed. This is a demo version.');
                }
            }
            
            showDemoResults() {
                this.hideAllStates();
                
                const demoTracks = [
                    {
                        title: "Demo Track 1",
                        user: { name: "Demo Artist 1" },
                        duration: 180,
                        artwork: null,
                        is_streamable: false
                    },
                    {
                        title: "Demo Track 2", 
                        user: { name: "Demo Artist 2" },
                        duration: 240,
                        artwork: null,
                        is_streamable: false
                    }
                ];
                
                this.displayTracks(demoTracks);
            }
            
            displayTracks(tracks) {
                this.currentTracks = tracks;
                this.tracksContainer.innerHTML = '';
                
                tracks.forEach((track, index) => {
                    const trackDiv = document.createElement('div');
                    trackDiv.className = 'track-item';
                    trackDiv.innerHTML = `
                        <div class="track-artwork">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="track-info">
                            <div class="track-title">${track.title}</div>
                            <div class="track-artist">${track.user.name}</div>
                            <div class="track-duration">${Math.floor(track.duration / 60)}:${(track.duration % 60).toString().padStart(2, '0')}</div>
                        </div>
                        <div class="track-actions">
                            <button class="action-btn disabled-btn" disabled>
                                <i class="fas fa-ban"></i>
                                Demo Only
                            </button>
                        </div>
                    `;
                    this.tracksContainer.appendChild(trackDiv);
                });
                
                this.tracksContainer.classList.remove('hidden');
            }
            
            showLoading() {
                this.hideAllStates();
                this.loadingState.classList.remove('hidden');
            }
            
            showError(message) {
                this.hideAllStates();
                document.getElementById('errorMessage').textContent = message;
                this.errorState.classList.remove('hidden');
            }
            
            hideAllStates() {
                this.loadingState.classList.add('hidden');
                this.errorState.classList.add('hidden');
                this.noResultsState.classList.add('hidden');
                this.tracksContainer.classList.add('hidden');
            }
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM Content Loaded');
            window.app = new SimpleLetsListen();
        });
        
        // Also try to initialize immediately
        if (document.readyState === 'loading') {
            console.log('‚è≥ Document still loading...');
        } else {
            console.log('üöÄ Document already loaded, initializing now...');
            window.app = new SimpleLetsListen();
        }
    </script>
</body>
</html>
